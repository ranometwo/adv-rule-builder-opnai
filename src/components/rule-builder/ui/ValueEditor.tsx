import { Input } from '@/components/ui/input'; import { Select,SelectContent,SelectItem,SelectTrigger,SelectValue } from '@/components/ui/select'; import { fieldMeta } from '../data/catalog'; export default function ValueEditor({field,operator,value,onChange}:{field:string;operator:string;value:any;onChange:(v:any)=>void}){ if(['EXISTS','NOT_EXISTS'].includes(operator))return <div className='text-xs text-slate-400'>(no value)</div>; const meta=fieldMeta(field); const type=(meta?.type as string)||'number'; if(operator==='BETWEEN'){const[a,b]=Array.isArray(value)?value:[0,0]; return(<div className='flex items-center gap-2'><Input type='number' className='w-24' value={a} onChange={e=>onChange([Number(e.target.value),b])}/><span className='text-slate-400'>and</span><Input type='number' className='w-24' value={b} onChange={e=>onChange([a,Number(e.target.value)])}/></div>)} if(['IN','NOT_IN'].includes(operator)){return(<Input className='w-64' placeholder='Comma separated values' value={Array.isArray(value)?value.join(', '):''} onChange={e=>onChange(e.target.value.split(',').map(s=>s.trim()).filter(Boolean))}/>) } if(type.includes('boolean')){return(<Select value={String(value)} onValueChange={v=>onChange(v==='true')}><SelectTrigger className='w-32'><SelectValue/></SelectTrigger><SelectContent><SelectItem value='true'>true</SelectItem><SelectItem value='false'>false</SelectItem></SelectContent></Select>)} if(type.includes('number')){return <Input type='number' className='w-32' value={Number(value)} onChange={e=>onChange(Number(e.target.value))}/> } return <Input className='w-64' value={String(value??'')} onChange={e=>onChange(e.target.value)}/> }